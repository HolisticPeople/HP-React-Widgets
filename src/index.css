@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* HolisticPeople Dark Theme - WooCommerce Integration */

@layer base {
    :root {
        --background: 0 0% 7%;
        --foreground: 0 0% 95%;

        --card: 0 0% 10%;
        --card-foreground: 0 0% 95%;

        --popover: 0 0% 10%;
        --popover-foreground: 0 0% 95%;

        --primary: 270 100% 64%;
        --primary-foreground: 0 0% 100%;

        --secondary: 0 0% 15%;
        --secondary-foreground: 0 0% 95%;

        --muted: 0 0% 20%;
        --muted-foreground: 0 0% 65%;

        --accent: 270 100% 64%;
        --accent-foreground: 0 0% 100%;

        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;

        --border: 270 50% 40%;
        --input: 0 0% 20%;
        --ring: 270 100% 64%;

        --radius: 0.5rem;

        /* Custom tokens */
        --nav-icon-bg: 0 0% 12%;
        --nav-icon-border: 270 50% 40%;
        --success: 142 76% 36%;
        --warning: 38 92% 50%;

        /* Glassmorphism tokens for HP Menu */
        --glass-bg: 0 0% 10% / 0.7;
        --glass-border: 270 50% 40% / 0.15;
        --glass-glow: 270 100% 64% / 0.1;
        
        /* Shadows for HP Menu */
        --shadow-float: 0 8px 32px -8px hsl(0 0% 0% / 0.5), 0 4px 16px -4px hsl(0 0% 0% / 0.3);
        --shadow-soft: 0 4px 20px -4px hsl(0 0% 0% / 0.4);
        --shadow-glow: 0 0 40px -10px hsl(var(--primary) / 0.2);
        
        /* Typography for HP Menu */
        --font-display: 'Cormorant Garamond', Georgia, serif;
        --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    .dark {
        --background: 0 0% 7%;
        --foreground: 0 0% 95%;
        --card: 0 0% 10%;
        --card-foreground: 0 0% 95%;
        --popover: 0 0% 10%;
        --popover-foreground: 0 0% 95%;
        --primary: 270 100% 64%;
        --primary-foreground: 0 0% 100%;
        --secondary: 0 0% 15%;
        --secondary-foreground: 0 0% 95%;
        --muted: 0 0% 20%;
        --muted-foreground: 0 0% 65%;
        --accent: 270 100% 64%;
        --accent-foreground: 0 0% 100%;
        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;
        --border: 270 50% 40%;
        --input: 0 0% 20%;
        --ring: 270 100% 64%;
    }
}

@layer base {
    * {
        border-color: hsl(var(--border));
    }

    body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    /* Fix browser autofill background - maintain dark theme */
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active,
    select:-webkit-autofill,
    select:-webkit-autofill:hover,
    select:-webkit-autofill:focus,
    select:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0 30px hsl(var(--input)) inset !important;
        -webkit-text-fill-color: hsl(var(--foreground)) !important;
        caret-color: hsl(var(--foreground)) !important;
        transition: background-color 5000s ease-in-out 0s;
    }
}

@layer components {
    .nav-icon-button {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 1rem;
        border-radius: 0.5rem;
        border: 1px solid hsl(var(--border));
        background-color: hsl(var(--card));
        transition: all 0.2s;
        cursor: pointer;
    }

    .nav-icon-button:hover {
        border-color: hsl(var(--primary));
        background-color: hsl(var(--secondary));
    }

    .nav-icon-button.active {
        border-color: hsl(var(--primary));
        background-color: hsl(var(--secondary));
    }

    .nav-icon-button svg {
        width: 1.5rem;
        height: 1.5rem;
        color: hsl(var(--primary));
    }

    .nav-icon-button span {
        font-size: 0.75rem;
        color: hsl(var(--foreground));
    }

    /* Address card + slider styles shared with AddressCardPicker */
    .address-card {
        position: relative;
        border-radius: 0.75rem;
        border: 1px solid hsl(var(--border));
        background-color: hsl(var(--card));
        padding: 1.25rem;
        transition: all 0.2s ease-out;
        /* Ensure all cards have at least the same height so rows look uniform */
        min-height: 300px;
        display: flex;
        flex-direction: column;
    }

    .address-card:hover {
        border-color: hsl(var(--primary));
        box-shadow: 0 8px 24px -4px hsl(var(--primary) / 0.3);
    }

    .address-card.selected {
        border-color: hsl(var(--primary));
        box-shadow: 0 0 0 1px hsl(var(--primary));
    }

    .address-card.is-default {
        border-color: hsl(var(--primary));
    }

    /* Prevent theme badges / triangles from appearing on default cards */
    .address-card.is-default::before,
    .address-card.is-default::after {
        content: none !important;
        border: 0 !important;
    }

    .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2.25rem;
        height: 2.25rem;
        border-radius: 0.75rem;
        background-color: hsla(var(--secondary), 0.8);
        color: #ffffff !important; /* Force high contrast for debug */
        font-size: 16px !important; /* Prevent font-size: 0 */
        transition: all 0.2s ease-out;
    }

    .action-btn:hover {
        background-color: hsl(var(--primary));
        color: hsl(var(--primary-foreground)) !important;
        transform: scale(1.08);
    }

    .action-btn.destructive:hover {
        background-color: hsl(var(--destructive));
        color: hsl(var(--destructive-foreground));
    }

    /* Disabled action button - grayed out */
    .action-btn:disabled:not(.is-default-star) {
        opacity: 0.4;
        cursor: not-allowed;
        pointer-events: none;
    }

    /* Highlighted star button for default address - unclickable but shows this is default */
    .action-btn.is-default-star,
    .action-btn.is-default-star:disabled,
    .action-btn.is-default-star:hover,
    .action-btn.is-default-star:active,
    .action-btn.is-default-star:focus {
        background-color: hsl(var(--primary)) !important;
        color: hsl(var(--primary-foreground)) !important;
        cursor: default !important;
        opacity: 1 !important;
        transform: none !important;
        pointer-events: none;
    }

    /* ===== Funnel Section Layout Fixes ===== */
    
    /* Ensure all funnel sections have proper stacking and no overlap */
    .hp-funnel-section {
        position: relative;
        z-index: 1;
        /* Ensure background covers full section */
        background-color: inherit;
    }
    
    /* Infographics should not have any height constraints */
    .hp-funnel-infographics {
        min-height: auto !important;
        height: auto !important;
    }
    
    /* Ensure section content doesn't overflow into other sections */
    .hp-funnel-section > * {
        position: relative;
    }
    
    /* Funnel CTA + badge styling (match reference funnel):
       - CTA background uses the funnel accent (orange)
       - CTA/BADGE text uses the funnel background (dark) */
    /* Increase specificity so this beats Tailwind utilities (shadow-lg, text-*, etc.) */
    .hp-funnel-section .hp-funnel-cta-btn,
    .hp-funnel-checkout-app .hp-funnel-cta-btn,
    .hp-funnel-cta-btn {
        /* Primary source of truth comes from FunnelStylesShortcode */
        background-color: var(--hp-funnel-accent, hsl(var(--accent))) !important;
        /* Use the funnel page background as the text color (dark) */
        color: var(--hp-funnel-page-bg, hsl(var(--background))) !important;
        border-radius: 9999px !important;
        transition: box-shadow 0.2s ease, transform 0.2s ease, filter 0.2s ease;
        /* Force override of Tailwind shadow utilities */
        box-shadow: 0 10px 30px rgba(0,0,0,0.25) !important;
    }
    .hp-funnel-section .hp-funnel-cta-btn:hover,
    .hp-funnel-checkout-app .hp-funnel-cta-btn:hover,
    .hp-funnel-cta-btn:hover {
        filter: brightness(0.97);
        transform: translateY(-1px);
        /* Expand glow on hover */
        box-shadow:
            0 14px 40px rgba(0,0,0,0.30),
            0 0 60px rgba(var(--hp-funnel-accent-rgb, 234,179,8), 0.65) !important;
    }

    .hp-funnel-section .hp-funnel-badge-pill,
    .hp-funnel-checkout-app .hp-funnel-badge-pill,
    .hp-funnel-badge-pill {
        background-color: var(--hp-funnel-accent, hsl(var(--accent))) !important;
        /* Ensure badge text is the funnel background (dark), not the accent */
        color: var(--hp-funnel-page-bg, hsl(var(--background))) !important;
        border-radius: 9999px !important;
    }

    .action-btn svg,
    .slider-nav-btn svg {
        /* Baseline reset for any SVG in our buttons */
        display: inline-block;
    }

    /* Custom HP icons: stroked for a refined look */
    .action-btn svg.hp-icon,
    .slider-nav-btn svg.hp-icon {
        all: unset;
        display: inline-block !important;
        width: 1.125rem !important;
        height: 1.125rem !important;
        color: currentColor !important;
    }

    .action-btn svg.hp-icon *,
    .slider-nav-btn svg.hp-icon * {
        stroke: currentColor !important;
    }

    .slider-nav-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 9999px;
        background-color: hsl(var(--card));
        border: 1px solid hsl(var(--border) / 0.5);
        color: hsl(var(--muted-foreground));
        transition: all 0.2s ease-out;
    }

    .slider-nav-btn:hover:not(:disabled) {
        background-color: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        border-color: hsl(var(--primary));
    }

    .slider-nav-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }

    .default-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        border-radius: 9999px;
        padding: 0.25rem 0.625rem;
        font-size: 0.75rem;
        font-weight: 500;
        background-color: hsla(var(--primary), 0.2);
        color: hsl(var(--primary));
    }

    .slider-dot {
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 9999px;
        background-color: hsl(var(--muted));
        transition: all 0.2s ease-out;
    }

    .slider-dot.active {
        width: 1.5rem;
        background-color: hsl(var(--primary));
    }

    /* Dark scrollbar utilities */
    .scrollbar-thin {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--muted)) hsl(var(--background));
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background-color: hsl(var(--background));
        border-radius: 9999px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: hsl(var(--muted));
        border-radius: 9999px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background-color: hsl(var(--muted-foreground));
    }

    /* Horizontal slider scrollbar - make track dark and thumb subtle */
    .address-slider {
        scrollbar-color: hsl(var(--muted)) hsl(var(--background));
    }

    .address-slider::-webkit-scrollbar {
        height: 6px;
    }

    .address-slider::-webkit-scrollbar-track {
        background-color: hsl(var(--background));
    }

    .address-slider::-webkit-scrollbar-thumb {
        background-color: hsl(var(--muted));
        border-radius: 9999px;
    }

    .tooltip-content {
        border-radius: 0.5rem;
        background-color: hsl(var(--popover));
        color: hsl(var(--popover-foreground));
        border: 1px solid hsl(var(--border));
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.75);
    }

    /* Mobile safe area padding for footer/buttons */
    .pb-safe {
        padding-bottom: max(1rem, env(safe-area-inset-bottom, 1rem));
    }

    /* Dialog mobile fixes - subtle margin adjustment */
    @media (max-width: 640px) {
        [role="dialog"] {
            width: calc(100% - 1.5rem) !important;
            max-height: calc(100vh - 4rem) !important;
            max-height: calc(100dvh - 4rem) !important;
        }
    }

    /* Ensure emoji flags render correctly - force emoji font */
    .emoji-flag {
        font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Android Emoji", "EmojiSymbols", "Twemoji Mozilla", sans-serif !important;
        font-style: normal !important;
        font-weight: normal !important;
        line-height: 1 !important;
        -webkit-font-smoothing: antialiased;
    }

    /* ===== HP Menu Styles ===== */
    
    /* Custom icon reset for WordPress compatibility */
    .hp-icon {
        all: unset !important;
        display: inline-block !important;
        color: currentColor !important;
    }

    .hp-icon * {
        stroke: currentColor !important;
    }

    /* Menu glass item with explicit styles for WordPress */
    .hp-menu-glass-item {
        position: relative !important;
        overflow: hidden !important;
        border-radius: 0.75rem !important;
        background-color: hsl(var(--secondary) / 0.5) !important;
        backdrop-filter: blur(12px) !important;
        -webkit-backdrop-filter: blur(12px) !important;
        border: 1px solid hsl(var(--border) / 0.2) !important;
        transition: all 0.3s ease-out !important;
        box-shadow: var(--shadow-soft) !important;
    }

    .hp-menu-glass-item:hover {
        background-color: hsl(var(--secondary) / 0.7) !important;
        border-color: hsl(var(--primary) / 0.2) !important;
        box-shadow: var(--shadow-float), var(--shadow-glow) !important;
        transform: translateY(-2px) !important;
    }

    /* Menu label reset */
    .hp-menu-label {
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1.4 !important;
    }

    /* Category label with WordPress reset */
    .hp-category-label {
        all: unset !important;
        display: block !important;
        font-family: var(--font-body) !important;
        font-size: 0.75rem !important;
        font-weight: 500 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.1em !important;
        color: hsl(var(--muted-foreground) / 0.7) !important;
    }

    /* Hide scrollbar utility */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Font display for menu headers */
    .font-display {
        font-family: var(--font-display);
        font-weight: 400;
        letter-spacing: 0.01em;
    }
}